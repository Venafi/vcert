config:
  connection:
    platform: tpp
    url: https://my.tpp.instance.company.com # URL to TPP instance
    trustBundle: trustbundle.pem # TrustBundle for TPP connection
    credentials:
      accessToken: '{{ Env "TPP_ACCESS_TOKEN" }}'
      refreshToken: '{{ Env "TPP_REFRESH_TOKEN" }}'
      clientId: vcert-sdk
certificateTasks:
  - name: myCertificate # Task Identifier
    renewBefore: 31d
    setEnvVars: ["thumbprint", "serial"] #will set environment variables VCERT_TASKNAME_THUMBPRINT and VCERT_TASKNAME_SERIAL
    request:
      csr: service
      keyPassword: "newPassword!"
      subject:
        # Templating needs to go between single quotes to avoid issues when refreshing tokens and saving back
        commonName: 'mypem.company.com'
      fields:
        - name: 'mycustomfield'
          value: '12345'
      zone: 'Certificates\Vcert'
    installations:
      - format: PEM
        file: 'c:\vcert\tpp\windows.pem'
        chainFile: 'c:\vcert\tpp\chain.cer'
        keyFile: 'c:\vcert\tpp\windowskey.pem'
        afterInstallAction: 'echo Success!!!'
